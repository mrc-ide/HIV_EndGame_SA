base_rate_reduction = base_rate_reduction)
t$log()
# install.packages("drat") # installer for adding "mrc-ide"
# drat:::add("mrc-ide")
# install.packages("didehpc")
library(didehpc) # load the didehpc support package
workdir <- "Q:/Git/HIV_EndGame_SA"
# dir.create(workdir)
# file.copy(".", workdir, recursive = TRUE, overwrite = TRUE)
mrc_config <- didehpc::didehpc_config(credentials = "spr21", workdir=workdir, cluster="mrc")
packages = c("tidyr", "dplyr", "here", "ggplot2", "gridExtra", "readr")
sources <- c("scripts/modify_rollout.R", "R/read_and_run.R", "R/support_modify_inputs.R")
ctx <- context::context_save("contexts", packages = packages, sources = sources)
mrcq <- didehpc::queue_didehpc(ctx, config=mrc_config)
sources <- c("scripts/modify_rollout.R", "R/read_and_run.R", "R/support_modify_inputs.R")
ctx <- context::context_save("contexts", packages = packages, sources = sources)
mrc_config
ctx <- context::context_save("contexts", packages = packages, sources = sources)
mrc_config
sources <- c("R/read_and_run.R", "R/support_modify_inputs.R")
ctx <- context::context_save("contexts", packages = packages, sources = sources)
sources <-"R/support_modify_inputs.R"
ctx <- context::context_save("contexts", packages = packages, sources = sources)
ctx <- context::context_save("contexts", packages = packages, sources = "R/read_and_run.R")
# install.packages("drat") # installer for adding "mrc-ide"
# drat:::add("mrc-ide")
# install.packages("didehpc")
library(didehpc) # load the didehpc support package
# to edit the .rprofile load the following package
library(usethis)
usethis::edit_r_profile()
config <- didehpc::didehpc_config(credentials = list(username = "spr21", password = "Wednesday123!"))
config
mrc_config <- didehpc::didehpc_config(credentials = "spr21", workdir=workdir, cluster="mrc")
packages = c("tidyr", "dplyr", "here", "ggplot2", "gridExtra", "readr")
sources <- c("scripts/modify_rollout.R", "R/read_and_run.R", "R/support_modify_inputs.R")
ctx <- context::context_save("contexts", packages = packages, sources = sources)
mrcq <- didehpc::queue_didehpc(ctx, config=config)
mrcq <- didehpc::queue_didehpc(ctx, config=mrc_config)
mrcq <- didehpc::queue_didehpc(ctx, config=mrc_config)
mrc_config <- didehpc::didehpc_config(credentials = "spr21", workdir=workdir, cluster="mrc")
packages = c("tidyr", "dplyr", "here", "ggplot2", "gridExtra", "readr")
sources <- c("scripts/modify_rollout.R", "R/read_and_run.R", "R/support_modify_inputs.R")
ctx <- context::context_save("contexts", packages = packages, sources = sources)
mrcq <- didehpc::queue_didehpc(ctx, config=mrc_config)
mrc_config <- didehpc::didehpc_config(credentials = "spr21", workdir=workdir, cluster="mrc")
packages = c("tidyr", "dplyr", "here", "ggplot2", "gridExtra", "readr")
sources <- c("scripts/modify_rollout.R", "R/read_and_run.R", "R/support_modify_inputs.R")
ctx <- context::context_save("contexts", packages = packages, sources = sources)
sources <- c("scripts\modify_rollout.R", "R\read_and_run.R", "R\support_modify_inputs.R")
sources <- c("scripts/modify_rollout.R", "R/read_and_run.R", "R/support_modify_inputs.R")
packages = c("tidyr", "dplyr", "here", "ggplot2", "gridExtra", "readr")
sources <- c("scripts/modify_rollout.R", "R/read_and_run.R", "R/support_modify_inputs.R")
ctx <- context::context_save("contexts", packages = packages, sources = sources)
View(t)
here()
library(here())
system("T:/Rtools/Rtools42/x86_64-w64-mingw32.static.posix/bin/g++.exe-std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa -O2")
system("T:/Rtools/Rtools42/x86_64-w64-mingw32.static.posix/bin/g++.exe-std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa")
system("T:/Rtools/Rtools42/x86_64-w64-mingw32.static.posix/bin/g++.exe-std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa")
system("T:/Rtools/Rtools42/x86_64-w64-mingw32.static.posix/bin/g++.exe -std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa")
system("T:/Rtools/Rtools42/x86_64-w64-mingw32.static.posix/bin/g++.exe -std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa -O2")
system("compile.bat")
system("./thembisa")
system("./thembisa.exe")
workdir <- "Q:/Git/HIV_EndGame_SA/THEMBISAv18"
setwd(workdir)
library(didehpc)
getwd()
mrc_config <- didehpc::didehpc_config(credentials = "spr21", workdir=workdir)
packages = c("tidyr", "dplyr","ggplot2", "readr", "purrr")
sources <- c("modify_rollout_cluster.R", "read_and_run_cluster.R", "support_modify_inputs_cluster.R", "cluster_function_thembisav18.R")
ctx <- context::context_save("contexts", packages = packages, sources = sources)
mrcq <- didehpc::queue_didehpc(ctx, config=mrc_config)
# j <- mrcq$enqueue(system("g++ -std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa"))
# j$status()
# j$log()
#
k <- mrcq$enqueue(system("./thembisa.exe"))
k$status()
k$log()
k$log()
k$log()
k$log()
k$log()
k$log()
k$log()
k$log()
k$log()
k$log()
k$log()
k$log()
k$status()
k$log()
k$status()
k$log()
system("compile.bat")
mrc_config <- didehpc::didehpc_config(credentials = "spr21", workdir=workdir)
packages = c("tidyr", "dplyr","ggplot2", "readr", "purrr")
sources <- c("modify_rollout_cluster.R", "read_and_run_cluster.R", "support_modify_inputs_cluster.R", "cluster_function_thembisav18.R")
ctx <- context::context_save("contexts", packages = packages, sources = sources)
mrcq <- didehpc::queue_didehpc(ctx, config=mrc_config)
h <- mrcq$enqueue(packageVersion("ggplot2"))
h$wait(10)
# j <- mrcq$enqueue(system("g++ -std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa"))
# j$status()
# j$log()
#
k <- mrcq$enqueue(system("./thembisa.exe"))
k$status()
k$log()
# j <- mrcq$enqueue(system("g++ -std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa"))
# j$status()
# j$log()
#
k <- mrcq$enqueue(system("./thembisa.exe"))
k$status()
k$log()
k$log()
k$log()
system("./thembisa.exe")
system("compile.bat")
system("./thembisa.exe")
system("./thembisa")
system("compile.bat")
system("./thembisa")
getwd()
system("./thembisa.exe")
# j <- mrcq$enqueue(system("g++ -std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa"))
# j$status()
# j$log()
#
k <- mrcq$enqueue(system("compile.bat"))
k$status()
k$status()
k$status()
k$status()
k$status()
k$status()
k$status()
k$status()
k$status()
k$status()
k$status()
k$status()
k$status()
k$status()
k$status()
k$status()
k$log()
#
x<- mrcq$enqueue(run_thembisa())
x$status()
x$log()
system("compile.bat")
system("./thembisa.exe")
system("compile.bat")
system("./thembisa")
system("./thembisa.exe")
system("compile.bat")
system("./thembisa")
system("compile.bat")
system("./thembisa")
mrc_config <- didehpc::didehpc_config(credentials = "spr21", workdir=workdir)
packages = c("tidyr", "dplyr","ggplot2", "readr", "purrr")
sources <- c("modify_rollout_cluster.R", "read_and_run_cluster.R", "support_modify_inputs_cluster.R", "cluster_function_thembisav18.R")
ctx <- context::context_save("contexts", packages = packages, sources = sources)
mrcq <- didehpc::queue_didehpc(ctx, config=mrc_config)
#
x<- mrcq$enqueue(run_thembisa())
x$status()
x$status()
x$status()
x$status()
x$status()
x$log()
x$status()
x$status()
x$status()
x$log()
k$log()
x$log()
k$status()
k$log()
# j <- mrcq$enqueue(system("g++ -std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa"))
# j$status()
# j$log()
#
k <- mrcq$enqueue(system("compile.bat"))
k$status()
k$log()
k$log()
k$log()
#
x<- mrcq$enqueue(run_thembisa())
x$status()
x$status()
x$status()
x$log()
#
x<- mrcq$enqueue(run_thembisa())
x$status()
x$log()
x$log()
x$status()
x$log()
x$log()
x$log()
x$log()
system("compile.bat")
system("./thembisa")
# j <- mrcq$enqueue(system("g++ -std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa"))
# j$status()
# j$log()
#
k <- mrcq$enqueue(system("./thembisa.exe"))
k$status()
k$log()
k$status()
k$log()
k$log()
k$log()
k$log()
k$log()
k$log()
k$log()
k$log()
#
x<- mrcq$enqueue(run_thembisa())
k$log()
k$status()
k$status()
k$status()
k$status()
x$log()
x$status()
k$log()
k$log()
k$status()
k$log()
k$status()
k$log()
test_reduction_only <- read_csv("../results/test_reduction_only.csv")
source("scripts/cluster_function_thembisav18.R")
source("cluster_function_thembisav18.R")
test_reduction_only <- read_csv("../results/test_reduction_only.csv")
View(test_reduction_only)
test_reduction_only %>% mutate(intervention_year = as.factor(pitc_reduction_year)) %>%
filter(indicator == "HIVinc15to49", year == 2100) %>%
ggplot(aes(pitc_reduction_year, mean, group = scenario, fill = scenario)) +
geom_errorbar(aes(ymin = lower_CI, ymax = upper_CI, fill = scenario), alpha = 0.25, show.legend = F) +
geom_point(aes(colour = scenario), show.legend = T)
test_reduction_only %>% mutate(intervention_year = as.factor(pitc_reduction_year)) %>%
filter(indicator == "HIVinc15to49", year == 2100, test_reduction == 100) %>%
ggplot(aes(pitc_reduction_year, mean, group = scenario, fill = scenario)) +
geom_errorbar(aes(ymin = lower_CI, ymax = upper_CI, fill = scenario), alpha = 0.25, show.legend = F) +
geom_point(aes(colour = scenario), show.legend = T) +
geom_hline(aes(yintercept = 0.001), lty = "dotted") +
xlab("") +
scale_y_continuous("HIV incidence per 1000 (15-49 years)", labels = (function(l) {round(l*1e3,1)})) +
expand_limits(y=0) + theme_classic() +
theme(axis.text = element_text(size = 14),
axis.title.y = element_text(size = 14),
axis.title.x = element_text(size = 14)) +
facet_wrap(vars(test_reduction),labeller = as_labeller(c("0" = "No PITC reduction",
"20" = "20% PITC reduction",
"40" = "40% PITC redcution",
"60" = "60% PITC redcution",
"80" = "80% PITC redcution",
"100" = "100% PITC redcution")),
ncol = 2) +
scale_fill_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) +
scale_color_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) + theme(legend.title = element_blank())
test_reduction_only %>% mutate(intervention_year = as.factor(pitc_reduction_year)) %>%
filter(indicator == "HIVinc15to49", year == 2100, test_reduction == 100) %>%
ggplot(aes(pitc_reduction_year, mean, group = scenario, fill = scenario)) +
geom_errorbar(aes(ymin = lower_CI, ymax = upper_CI, fill = scenario), alpha = 0.25, show.legend = F) +
geom_point(aes(colour = scenario), show.legend = T) +
geom_hline(aes(yintercept = 0.001), lty = "dotted") +
xlab("PITC reduction year") +
scale_y_continuous("HIV incidence per 1000 (15-49 years)", labels = (function(l) {round(l*1e3,1)})) +
expand_limits(y=0) + theme_classic() +
theme(axis.text = element_text(size = 14),
axis.title.y = element_text(size = 14),
axis.title.x = element_text(size = 14)) +
facet_wrap(vars(test_reduction),labeller = as_labeller(c("0" = "No PITC reduction",
"20" = "20% PITC reduction",
"40" = "40% PITC redcution",
"60" = "60% PITC redcution",
"80" = "80% PITC redcution",
"100" = "100% PITC redcution")),
ncol = 2) +
scale_fill_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) +
scale_color_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) + theme(legend.title = element_blank())
test_reduction_only %>% mutate(intervention_year = as.factor(pitc_reduction_year)) %>%
filter(indicator == "HIVinc15to49", year == 2100, test_reduction == 100) %>%
ggplot(aes(pitc_reduction_year, mean, group = scenario, color = scenario)) +
geom_errorbar(aes(ymin = lower_CI, ymax = upper_CI, color = scenario), alpha = 0.25, show.legend = F) +
geom_point(aes(colour = scenario), show.legend = T) +
geom_hline(aes(yintercept = 0.001), lty = "dotted") +
xlab("PITC reduction year") +
scale_y_continuous("HIV incidence per 1000 (15-49 years)", labels = (function(l) {round(l*1e3,1)})) +
expand_limits(y=0) + theme_classic() +
theme(axis.text = element_text(size = 14),
axis.title.y = element_text(size = 14),
axis.title.x = element_text(size = 14)) +
facet_wrap(vars(test_reduction),labeller = as_labeller(c("0" = "No PITC reduction",
"20" = "20% PITC reduction",
"40" = "40% PITC redcution",
"60" = "60% PITC redcution",
"80" = "80% PITC redcution",
"100" = "100% PITC redcution")),
ncol = 2) +
scale_fill_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) +
scale_color_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) + theme(legend.title = element_blank())
View(test_reduction_only)
test_reduction_only %>% mutate(intervention_year = as.factor(pitc_reduction_year)) %>%
filter(pitc_reduction_year == 2025, indicator == "HIVinc15to49", year > 1990) %>%
ggplot(aes(year, mean, group = scenario, fill = scenario)) +
geom_ribbon(aes(ymin = lower_CI, ymax = upper_CI, fill = scenario), alpha = 0.25, show.legend = F) +
geom_line(aes(colour = scenario), show.legend = T) +
geom_hline(aes(yintercept = 0.001), lty = "dotted") +
xlab("") +
scale_y_continuous("HIV incidence per 1000 (15-49 years)", labels = (function(l) {round(l*1e3,1)})) +
expand_limits(y=0) + theme_classic() +
theme(axis.text = element_text(size = 14),
axis.title.y = element_text(size = 14),
axis.title.x = element_text(size = 14)) +
facet_wrap(vars(test_reduction),labeller = as_labeller(c("0" = "No PITC reduction",
"20" = "20% PITC reduction",
"40" = "40% PITC redcution",
"60" = "60% PITC redcution",
"80" = "80% PITC redcution",
"100" = "100% PITC redcution")),
ncol = 2) +
scale_fill_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) +
scale_color_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) + theme(legend.title = element_blank())
run_on_cluster(pitc_reduction_years = c(2025,2030,2035, 2040, 2045, 2050),
pitc_reduction_percentage = c(100),
condom_usage_reduction = FALSE,
fsw_condom_usage_decrease = (0.07/3),
st_condom_usage_decrease = 0.07,
lt_condom_usage_decrease = 0.07,
condom_incr_start = 2025,
art_coverage_increase = FALSE,
art_interrupt_rate_decrease = 2/100,
art_incr_start = 2025,
summary_name = "test_reduction_only",
cumulative_years = 50,
art_coverage_decrease = FALSE,
art_interrupt_rate_increase = 2/100,
art_decr_start = 2025
)
View(run_on_cluster)
system("g++ -std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa.exe -O2")
run_on_cluster(pitc_reduction_years = c(2025,2035,2050),
pitc_reduction_percentage = c(0, 20, 40, 60, 80, 100),
condom_usage_reduction = TRUE,
fsw_condom_usage_decrease = (0.07/3),
st_condom_usage_decrease = 0.07,
lt_condom_usage_decrease = 0.07,
condom_incr_start = 2025,
art_coverage_increase = FALSE,
art_interrupt_rate_decrease = 2/100,
art_incr_start = 2025,
summary_name = "test_reduction_only",
cumulative_years = 50,
art_coverage_decrease = FALSE,
art_interrupt_rate_increase = 2/100,
art_decr_start = 2025
)
test_reduction_only <- read_csv("results/test_reduction_only.csv")
test_reduction_only %>% mutate(intervention_year = as.factor(pitc_reduction_year)) %>%
filter(indicator == "HIVinc15to49", year == 2100, test_reduction == 100) %>%
ggplot(aes(pitc_reduction_year, mean, group = scenario, color = scenario)) +
geom_errorbar(aes(ymin = lower_CI, ymax = upper_CI, color = scenario), alpha = 0.25, show.legend = F) +
geom_point(aes(colour = scenario), show.legend = T) +
geom_hline(aes(yintercept = 0.001), lty = "dotted") +
xlab("PITC reduction year") +
scale_y_continuous("HIV incidence per 1000 (15-49 years)", labels = (function(l) {round(l*1e3,1)})) +
expand_limits(y=0) + theme_classic() +
theme(axis.text = element_text(size = 14),
axis.title.y = element_text(size = 14),
axis.title.x = element_text(size = 14)) +
facet_wrap(vars(test_reduction),labeller = as_labeller(c("0" = "No PITC reduction",
"20" = "20% PITC reduction",
"40" = "40% PITC redcution",
"60" = "60% PITC redcution",
"80" = "80% PITC redcution",
"100" = "100% PITC redcution")),
ncol = 2) +
scale_fill_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) +
scale_color_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) + theme(legend.title = element_blank())
test_reduction_only <- read_csv("results/test_reduction_only.csv")
View(test_reduction_only)
getwd()
run_on_cluster(pitc_reduction_years = c(2025,2035,2050),
pitc_reduction_percentage = c(0, 20, 40, 60, 80, 100),
condom_usage_reduction = FALSE,
fsw_condom_usage_decrease = (0.07/3),
st_condom_usage_decrease = 0.07,
lt_condom_usage_decrease = 0.07,
condom_incr_start = 2025,
art_coverage_increase = FALSE,
art_interrupt_rate_decrease = 2/100,
art_incr_start = 2025,
summary_name = "test_reduction_only",
cumulative_years = 50,
art_coverage_decrease = FALSE,
art_interrupt_rate_increase = 2/100,
art_decr_start = 2025
)
test_reduction_only <- read_csv("results/test_reduction_only.csv")
test_reduction_only %>% mutate(intervention_year = as.factor(pitc_reduction_year)) %>%
filter(indicator == "HIVinc15to49", year == 2100, test_reduction == 100) %>%
ggplot(aes(pitc_reduction_year, mean, group = scenario, color = scenario)) +
geom_errorbar(aes(ymin = lower_CI, ymax = upper_CI, color = scenario), alpha = 0.25, show.legend = F) +
geom_point(aes(colour = scenario), show.legend = T) +
geom_hline(aes(yintercept = 0.001), lty = "dotted") +
xlab("PITC reduction year") +
scale_y_continuous("HIV incidence per 1000 (15-49 years)", labels = (function(l) {round(l*1e3,1)})) +
expand_limits(y=0) + theme_classic() +
theme(axis.text = element_text(size = 14),
axis.title.y = element_text(size = 14),
axis.title.x = element_text(size = 14)) +
facet_wrap(vars(test_reduction),labeller = as_labeller(c("0" = "No PITC reduction",
"20" = "20% PITC reduction",
"40" = "40% PITC redcution",
"60" = "60% PITC redcution",
"80" = "80% PITC redcution",
"100" = "100% PITC redcution")),
ncol = 2) +
scale_fill_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) +
scale_color_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) + theme(legend.title = element_blank())
system("g++ -std=c++14 THEMBISA.cpp StatFunctions.cpp mersenne.cpp -o thembisa.exe -O2")
run_on_cluster(pitc_reduction_years = c(2025,2050),
pitc_reduction_percentage = c(100),
condom_usage_reduction = FALSE,
fsw_condom_usage_decrease = (0.07/3),
st_condom_usage_decrease = 0.07,
lt_condom_usage_decrease = 0.07,
condom_incr_start = 2025,
art_coverage_increase = FALSE,
art_interrupt_rate_decrease = 2/100,
art_incr_start = 2025,
summary_name = "test_reduction_only",
cumulative_years = 50,
art_coverage_decrease = FALSE,
art_interrupt_rate_increase = 2/100,
art_decr_start = 2025
)
test_reduction_only <- read_csv("results/test_reduction_only.csv")
test_reduction_only %>% mutate(intervention_year = as.factor(pitc_reduction_year)) %>%
filter(indicator == "HIVinc15to49", year == 2100, test_reduction == 100) %>%
ggplot(aes(pitc_reduction_year, mean, group = scenario, color = scenario)) +
geom_errorbar(aes(ymin = lower_CI, ymax = upper_CI, color = scenario), alpha = 0.25, show.legend = F) +
geom_point(aes(colour = scenario), show.legend = T) +
geom_hline(aes(yintercept = 0.001), lty = "dotted") +
xlab("PITC reduction year") +
scale_y_continuous("HIV incidence per 1000 (15-49 years)", labels = (function(l) {round(l*1e3,1)})) +
expand_limits(y=0) + theme_classic() +
theme(axis.text = element_text(size = 14),
axis.title.y = element_text(size = 14),
axis.title.x = element_text(size = 14)) +
facet_wrap(vars(test_reduction),labeller = as_labeller(c("0" = "No PITC reduction",
"20" = "20% PITC reduction",
"40" = "40% PITC redcution",
"60" = "60% PITC redcution",
"80" = "80% PITC redcution",
"100" = "100% PITC redcution")),
ncol = 2) +
scale_fill_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) +
scale_color_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) + theme(legend.title = element_blank())
run_on_cluster(pitc_reduction_years = c(2025,2050),
pitc_reduction_percentage = c(0),
condom_usage_reduction = FALSE,
fsw_condom_usage_decrease = (0.07/3),
st_condom_usage_decrease = 0.07,
lt_condom_usage_decrease = 0.07,
condom_incr_start = 2025,
art_coverage_increase = FALSE,
art_interrupt_rate_decrease = 2/100,
art_incr_start = 2025,
summary_name = "test_reduction_only",
cumulative_years = 50,
art_coverage_decrease = FALSE,
art_interrupt_rate_increase = 2/100,
art_decr_start = 2025
)
test_reduction_only <- read_csv("results/test_reduction_only.csv")
test_reduction_only %>% mutate(intervention_year = as.factor(pitc_reduction_year)) %>%
filter(indicator == "HIVinc15to49", year == 2100, test_reduction == 100) %>%
ggplot(aes(pitc_reduction_year, mean, group = scenario, color = scenario)) +
geom_errorbar(aes(ymin = lower_CI, ymax = upper_CI, color = scenario), alpha = 0.25, show.legend = F) +
geom_point(aes(colour = scenario), show.legend = T) +
geom_hline(aes(yintercept = 0.001), lty = "dotted") +
xlab("PITC reduction year") +
scale_y_continuous("HIV incidence per 1000 (15-49 years)", labels = (function(l) {round(l*1e3,1)})) +
expand_limits(y=0) + theme_classic() +
theme(axis.text = element_text(size = 14),
axis.title.y = element_text(size = 14),
axis.title.x = element_text(size = 14)) +
facet_wrap(vars(test_reduction),labeller = as_labeller(c("0" = "No PITC reduction",
"20" = "20% PITC reduction",
"40" = "40% PITC redcution",
"60" = "60% PITC redcution",
"80" = "80% PITC redcution",
"100" = "100% PITC redcution")),
ncol = 2) +
scale_fill_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) +
scale_color_discrete(labels = c("Baseline", "Reduced \nPITC \nonly")) + theme(legend.title = element_blank())
View(test_reduction_only)
